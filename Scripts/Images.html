<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Filter</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
  <div class="container">
  <p class="box">Current active Filter:</p>
  <p id="activeFilters" class="box">None</p> <!-- This will display active filters -->
  <div class="container2">
  <p class="box2">Filter by:</p>
  <nav>
    <button class="dropbtn">Menu</button>
    <ul class="dropdown-content">
      <li> <input type="checkbox" id="Menu1Checkbox"> Menu 1</li>
      <li> <input type="checkbox" id="Menu2Checkbox"> Menu 2</li>
      <li> <input type="checkbox" id="Menu3Checkbox"> Menu 3</li>
      <li> <input type="checkbox" id="Menu4Checkbox"> Menu 4</li>
      <li> <input type="checkbox" id="Menu5Checkbox"> Menu 5</li>
      <li> <input type="checkbox" id="Menu6Checkbox"> Menu 6</li>
    </ul>
    <button class="dropbtn">Geography</button>
    <ul class="dropdown-content">
      <li> <input type="checkbox" id="InsideKVVCheckbox"> Outside KVV</li>
      <li> <input type="checkbox" id="OutsideKVVCheckbox"> Inside KVV</a></li>
    </ul>
    
    <button class="dropbtn">Period of time</button>
    <ul class="dropdown-content">
      <li> <input type="date" id="startDate" name="From" value="" min="2022-05-01" max="2022-05-31" /></li>
      <li> <input type="date" id="endDate" name="To" value="" min="2022-05-01" max="2022-05-31" /></li>
      <button class="apply" id="applyDate">apply</button>
    </ul>
  </nav>
</div>
</div>
  <p></p>
  <div class="row">
  <div class="column">
    <img id="imageLeft" src="" alt="ImgLeft" class="img2">
  </div>
  <div class="column">
    <img id="imageRight" src="" alt="ImgRight" class="img2">
  </div>
  </div>
  <button id="buttonLeft" class="btn">  
    <span class="material-symbols-outlined">
      arrow_back_ios</span></button>
  <button id="buttonRight" class="btn">
    <span class="material-symbols-outlined">
      arrow_forward_ios
    </span></button>
    <button id="fetchImagesBtn">Apply Filters</button>

    


  <div class="timeline">
    <p id="dateL" class="box">Date L: </p>
    <p id="dateR" class="box">Date R: </p>
</div>
</body>
<script>
document.getElementById('buttonRight').addEventListener('click', function() {
    var url = 'http://localhost:5000/imageLeft_FWRD?';
    document.getElementById('imageLeft').src = url;
    serve_dateR_FWRD();
    serve_dateL_FWRD();
});
document.getElementById('buttonRight').addEventListener('click', function() {
var url = 'http://localhost:5000/imageRight_FWRD?';
document.getElementById('imageRight').src = url;
});
document.getElementById('buttonLeft').addEventListener('click', function() {
var url = 'http://localhost:5000/imageLeft_BCK?';
document.getElementById('imageLeft').src = url;
serve_dateR_BCK();
serve_dateL_BCK();
});
document.getElementById('buttonLeft').addEventListener('click', function() {
var url = 'http://localhost:5000/imageRight_BCK?' ;
document.getElementById('imageRight').src = url;
});
</script>
<script>
    function fetchImages() {
      fetch('http://localhost:5000/fetchImages', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
        // Optionally update your UI based on the response
        // For example, refresh images after fetching new ones
        document.getElementById('imageLeft').src = `http://localhost:5000/imageLeft_BCK?${new Date().getTime()}`;
        document.getElementById('imageRight').src = `http://localhost:5000/imageRight_BCK?${new Date().getTime()}`;
        serve_dateL_BCK();
        serve_dateR_BCK();

      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    document.getElementById('fetchImagesBtn').addEventListener('click', fetchImages);

</script>
<script>
    function sort_KVV_FALSE() {
      fetch('http://localhost:5000/sort_KVV_FALSE', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_KVV_FALSE() {
      fetch('http://localhost:5000/REMOVE_sort_KVV_FALSE', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }

    function sort_KVV_TRUE() {
      fetch('http://localhost:5000/sort_KVV_TRUE', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_KVV_TRUE() {
      fetch('http://localhost:5000/REMOVE_sort_KVV_TRUE', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }

    function sort_menu_1() {
      fetch('http://localhost:5000/sort_menu_1', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_menu_1() {
      fetch('http://localhost:5000/REMOVE_sort_menu_1', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    
    function sort_menu_2() {
      fetch('http://localhost:5000/sort_menu_2', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_menu_2() {
      fetch('http://localhost:5000/REMOVE_sort_menu_2', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }

    function sort_menu_3() {
      fetch('http://localhost:5000/sort_menu_3', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_menu_3() {
      fetch('http://localhost:5000/REMOVE_sort_menu_3', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }

    function sort_menu_4() {
      fetch('http://localhost:5000/sort_menu_4', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_menu_4() {
      fetch('http://localhost:5000/REMOVE_sort_menu_4', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    
    function sort_menu_5() {
      fetch('http://localhost:5000/sort_menu_5', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_menu_5() {
      fetch('http://localhost:5000/REMOVE_sort_menu_5', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }

    function sort_menu_6() {
      fetch('http://localhost:5000/sort_menu_6', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_menu_6() {
      fetch('http://localhost:5000/REMOVE_sort_menu_6', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }

 function sort_between() {
      fetch('http://localhost:5000/sort_between', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function REMOVE_sort_between() {
      fetch('http://localhost:5000/REMOVE_sort_between', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }


    document.getElementById('OutsideKVVCheckbox').addEventListener('change', function() {
      if (this.checked) {
        sort_KVV_FALSE();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_KVV_FALSE();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });

    document.getElementById('InsideKVVCheckbox').addEventListener('change', function() {
      if (this.checked) {
        sort_KVV_TRUE();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_KVV_TRUE();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });

    document.getElementById('Menu1Checkbox').addEventListener('change', function() {
      if (this.checked) {
        sort_menu_1();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_menu_1();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });
    document.getElementById('Menu2Checkbox').addEventListener('change', function() {
      if (this.checked) {
        sort_menu_2();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_menu_2();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });
    document.getElementById('Menu3Checkbox').addEventListener('change', function() {
      if (this.checked) {
        sort_menu_3();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_menu_3();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });
    document.getElementById('Menu4Checkbox').addEventListener('change', function() {
      if (this.checked) {
        sort_menu_4();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_menu_4();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });
    document.getElementById('Menu5Checkbox').addEventListener('change', function() {
      if (this.checked) {
        sort_menu_5();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_menu_5();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });
    document.getElementById('Menu6Checkbox').addEventListener('change', function() {
      if (this.checked) {
        sort_menu_6();
        console.log('Checkbox is checked');
        // Replace with your action when checked
      } else {
        REMOVE_sort_menu_6();
        console.log('Checkbox is unchecked');
        // Replace with your action when unchecked
      }
    });
    function applyDate() {
  var startDate = document.getElementById('startDate').value;
  var endDate = document.getElementById('endDate').value;

  fetch(`http://localhost:5000/sort_between?startDate=${startDate}&endDate=${endDate}`, {
    method: 'GET',
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    console.log('Success:', data.message);
    // Optionally update your UI or refresh images after applying filters
  })
  .catch(error => {
    console.error('Error:', error);
    // Handle errors here
  });
}

document.getElementById('applyDate').addEventListener('click', applyDate);

  function updateActiveFiltersDisplay() {
    let activeFilters = [];
  
    // Check each checkbox and add its label to activeFilters if checked
    if (document.getElementById('Menu1Checkbox').checked) {
        activeFilters.push('Menu 1');
    }
    if (document.getElementById('Menu2Checkbox').checked) {
        activeFilters.push('Menu 2');
    }
    if (document.getElementById('Menu3Checkbox').checked) {
        activeFilters.push('Menu 3');
    }
    if (document.getElementById('Menu4Checkbox').checked) {
        activeFilters.push('Menu 4');
    }
    if (document.getElementById('Menu5Checkbox').checked) {
        activeFilters.push('Menu 5');
    }
    if (document.getElementById('Menu6Checkbox').checked) {
        activeFilters.push('Menu 6');
    }
    if (document.getElementById('InsideKVVCheckbox').checked) {
        activeFilters.push('Outside KVV');
    }
    if (document.getElementById('OutsideKVVCheckbox').checked) {
        activeFilters.push('Inside KVV');
    }
  
    // Add other checkboxes as needed

    // Update the DOM to display active filters
    if (activeFilters.length > 0) {
        document.getElementById('activeFilters').textContent = activeFilters.join(', ');
    } else {
        document.getElementById('activeFilters').textContent = 'None';
    }
}

// Function to update Date L
    function serve_dateL_FWRD() {
      fetch('http://localhost:5000/dateLeft_FWRD', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
        document.getElementById('dateL').textContent = `Date L: ${data.date}`;
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }
    function serve_dateL_BCK() {
      fetch('http://localhost:5000/dateLeft_BCK', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log('Success:', data.message);
        document.getElementById('dateL').textContent = `Date L: ${data.date}`;
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });
    }

    // Function to update Date R
    function serve_dateR_FWRD() {
      fetch('http://localhost:5000/dateRight_FWRD', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log(data.dateR);
        document.getElementById('dateR').textContent = `Date R: ${data.date}`;
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });}

      // Function to update Date R
    function serve_dateR_BCK() {
      fetch('http://localhost:5000/dateRight_BCK', {
        method: 'GET',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        console.log(data.dateR);
        document.getElementById('dateR').textContent = `Date R: ${data.date}`;
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle errors here
      });}

// Event listeners for checkboxes to update active filters display
    document.getElementById('fetchImagesBtn').addEventListener('click', updateActiveFiltersDisplay);

// Add other checkboxes as needed
window.onload = function() {
            REMOVE_sort_KVV_FALSE();
            REMOVE_sort_KVV_TRUE();
            REMOVE_sort_between();
            REMOVE_sort_menu_1();
            REMOVE_sort_menu_2();
            REMOVE_sort_menu_3();
            REMOVE_sort_menu_4();
            REMOVE_sort_menu_5();
            REMOVE_sort_menu_6();
            fetchImages();
        };


</script>

</html>
